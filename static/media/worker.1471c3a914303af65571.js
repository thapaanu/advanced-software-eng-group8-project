onmessage=function(r){if("start"===r.data.action){var t=JSON.parse(r.data.all_layouts),e=JSON.parse(r.data.board);startSolving(t,e)}};var startSolving=function(r,t){startrecursiveSolver(r,t,0,0),postMessage("done")},startrecursiveSolver=function r(t,e,a,n){for(;-1!==e[a][n];)if(++a>=11&&(a=0,++n>=5))return void postMessage("All points done.");for(var o=function(o){if(void 0===t[o])return{v:void 0};for(var s=t[o].layouts,i=0;i<s.length;i++)for(var v=s[i],f=0;f<v.length;f++){for(var l=a-v[f][0],u=n-v[f][1],g=!0,p=0;p<v.length;p++){var h=l+v[p][0],d=u+v[p][1];if(h<0||h>=11||d<0||d>=5){g=!1;break}if(-1!==e[h][d]){g=!1;break}}if(g){for(var c=[],S=0;S<e.length;S++){for(var I=[],b=0;b<e[0].length;b++)I.push(e[S][b]);c.push(I)}for(var y=0;y<v.length;y++){var x=l+v[y][0],J=u+v[y][1];c[x][J]=t[o].shapeIndex}var M=t.filter((function(r){return parseInt(r.shapeIndex)!==parseInt(t[o].shapeIndex)}));0===M.length?postMessage({solution:JSON.stringify(c)}):r(M,c,a,n)}}},s=0;s<=t.length;s++){var i=o(s);if("object"===typeof i)return i.v}};